{% extends 'templates/header.html.twig' %}
{% block title %}
  {{ title }}
{% endblock %}
{% block css %}
  <link rel="stylesheet" href="/public/css/home.css" />
{% endblock %}
{% block body %}
  <body>
    <div class="container">
      <div class="card filters">
        <h3>Filtres</h3>
        <form action="/" method="post">
          <div class="form-group">
            <label for="price">Prix par nuit</label>
            <input type="number" id="minprice" name="minprice" min="0" max="10000" placeholder="Minimum" />
            <input type="number" id="maxprice" name="maxprice" min="0" max="10000" placeholder="Maximum" />
          </div>
          <div class="form-group">
            <label for="Type">Ville</label>
            <select name="PropertyCity" required>
              <option selected hidden value="0">Choisissez une ville</option>
              {% for cityData in propertiesCity %}
                <option value="{{ cityData['City'] }}">{{ cityData['City'] }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="form-group">
            <label for="Type">Type de logement</label>
            <select name="PropertyType" required>
              <option selected hidden value="0">Choisissez un type</option>
              {% for propertyType in propertiesTypes %}
                <option value="{{ propertyType.ID }}">{{ propertyType.Type }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="form-group">
            <label for="equipment">Les Ã©quipements</label>
            {% for propertyEquipment in propertiesEquipments %}
              <div>
                <input type="checkbox" id="equipment_{{ propertyEquipment.ID }}" name="equipment[]" value="{{ propertyEquipment.ID }}" />
                <label for="equipment_{{ propertyEquipment.ID }}">{{ propertyEquipment.Type }}</label>
              </div>
            {% endfor %}
          </div>
          <div class="form-group">
            <label for="services">Les services</label>
            {% for propertyService in propertiesServices %}
              <div>
                <input type="checkbox" id="service_{{ propertyService.ID }}" name="services[]" value="{{ propertyService.ID }}" />
                <label for="service_{{ propertyService.ID }}">{{ propertyService.Type }}</label>
              </div>
            {% endfor %}
          </div>
          <input type="submit" value="Envoyer" />
        </form>
      </div>
      <div class="card-list properties">
        {% for property in properties %}
          <div class="card property">
            <img src="/public/images/{{ property.Image }}" alt="Property Image" width="100" />
            <h4>{{ property.Title }}</h4>
            <p>{{ property.Description }}</p>
            <p>Price: {{ property.Price }}</p>
            <p>City: {{ property.City }}</p>
            {% if connected %}
              {% if property.isFavorite %}
                <form action="/revokeFavorite" method="post">
                  <input type="hidden" name="ID" value="{{ property.ID }}" />
                  <button type="submit">Retirer des favoris</button>
                </form>
              {% else %}
                <form action="/favorite" method="post">
                  <input type="hidden" name="ID" value="{{ property.ID }}" />
                  <button type="submit">Ajouter aux favoris</button>
                </form>
              {% endif %}
            {% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
  </body>
{% endblock %}
